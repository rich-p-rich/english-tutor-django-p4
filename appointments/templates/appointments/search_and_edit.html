{% extends 'base.html' %}

{% block title %}Search and Edit Appointments{% endblock %}

{% block content %}
<div class="container">
    <h1>Search and Edit Appointments</h1>
    
    <!-- Search Form -->
    <form method="post">
        {% csrf_token %}
        {{ search_form.as_p }}
        <button type="submit" name="search" class="btn btn-primary">Search</button>
    </form>
    
    <!-- Search Results -->
    {% if appointments %}
        <h2>Appointments</h2>
        <ul>
            {% for appointment in appointments %}
                <li>
                    {{ appointment.name }} {{ appointment.surname }} - {{ appointment.meeting_date }} at {{ appointment.meeting_time }}
                    <a href="{% url 'edit_appointment' appointment.id %}" class="btn btn-secondary btn-sm">Edit</a>
                </li>
            {% endfor %}
        </ul>
    {% elif appointments is not None %}
        <p>No appointments found.</p>
    {% endif %}
    
    <!-- Edit Form -->
    {% if change_form %}
        <h2>Edit Appointment for {{ appointment.name }} {{ appointment.surname }}</h2>
        <form method="post">
            {% csrf_token %}
            {{ change_form.as_p }}
            <button type="submit" name="save" class="btn btn-primary">Save changes</button>
        </form>
    {% endif %}
</div>
{% endblock content %}